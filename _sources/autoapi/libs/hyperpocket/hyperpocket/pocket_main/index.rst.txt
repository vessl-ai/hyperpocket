libs.hyperpocket.hyperpocket.pocket_main
========================================

.. py:module:: libs.hyperpocket.hyperpocket.pocket_main



Classes
-------

.. autoapisummary::

   libs.hyperpocket.hyperpocket.pocket_main.Pocket


Module Contents
---------------

.. py:class:: Pocket(tools: list[hyperpocket.tool_like.ToolLike] = None, auth: hyperpocket.pocket_auth.PocketAuth = None, use_profile: bool = False)

   Bases: :py:obj:`object`


   .. py:attribute:: server
      :type:  hyperpocket.server.server.PocketServer


   .. py:attribute:: auth
      :type:  hyperpocket.pocket_auth.PocketAuth


   .. py:attribute:: tools
      :type:  dict[str, hyperpocket.tool.Tool]


   .. py:method:: invoke(tool_name: str, body: Any, thread_id: str = 'default', profile: str = 'default', *args, **kwargs) -> str

      Invoke Tool synchronously

      :param tool_name: tool name to invoke
      :type tool_name: str
      :param body: tool arguments. should be json format
      :type body: Any
      :param thread_id: thread id
      :type thread_id: str
      :param profile: profile name
      :type profile: str

      :returns: tool result
      :rtype: str



   .. py:method:: ainvoke(tool_name: str, body: Any, thread_id: str = 'default', profile: str = 'default', *args, **kwargs) -> str
      :async:


      Invoke Tool asynchronously

      :param tool_name: tool name to invoke
      :type tool_name: str
      :param body: tool arguments. should be json format
      :type body: Any
      :param thread_id: thread id
      :type thread_id: str
      :param profile: profile name
      :type profile: str

      :returns: tool result
      :rtype: str



   .. py:method:: invoke_with_state(tool_name: str, body: Any, thread_id: str = 'default', profile: str = 'default', *args, **kwargs) -> tuple[str, bool]

      Invoke Tool with state synchronously
      State indicates whether this tool is paused or not.
      If the tool needs user's interaction or waiting for some process, this tool is paused.

      :param tool_name: tool name to invoke
      :type tool_name: str
      :param body: tool arguments. should be json format
      :type body: Any
      :param thread_id: thread id
      :type thread_id: str
      :param profile: profile name
      :type profile: str

      :returns: tool result and state.
      :rtype: tuple[str, bool]



   .. py:method:: ainvoke_with_state(tool_name: str, body: Any, thread_id: str = 'default', profile: str = 'default', *args, **kwargs) -> tuple[str, bool]
      :async:


      Invoke Tool with state synchronously
      State indicates whether this tool is paused or not.
      If the tool needs user's interaction or waiting for some process, this tool is paused.

      :param tool_name: tool name to invoke
      :type tool_name: str
      :param body: tool arguments. should be json format
      :type body: Any
      :param thread_id: thread id
      :type thread_id: str
      :param profile: profile name
      :type profile: str

      :returns: tool result and state.
      :rtype: tuple[str, bool]



   .. py:method:: initialize_tool_auth(thread_id: str = 'default', profile: str = 'default') -> dict[str, str]
      :async:


      Initialize authentication for all tools.

      This method prepares all tools that require authentication by retrieving
      their respective authentication URIs.

      If no tool requires authentication, an empty list is returned.

      :param thread_id: The thread id. Defaults to 'default'.
      :type thread_id: str
      :param profile: The profile to be used for authentication. Defaults to 'default'.
      :type profile: str

      :returns: A list of authentication URIs for the tools that require authentication.
      :rtype: List[str]



   .. py:method:: wait_tool_auth(thread_id: str = 'default', profile: str = 'default') -> bool
      :async:


      Wait until all tool authentications are completed.

      This method waits until all tools associated with the given
      `thread_id` and `profile` have completed their authentication process.

      :param thread_id: The thread id. Defaults to 'default'.
      :type thread_id: str
      :param profile: The profile to be used for authentication. Defaults to 'default'.
      :type profile: str

      :returns: Returns `True` if all tool authentications are successfully completed,
                or `False` if the process was interrupted or failed.
      :rtype: bool



   .. py:method:: acall(tool_name: str, body: Any, thread_id: str = 'default', profile: str = 'default', *args, **kwargs) -> tuple[str, bool]
      :async:


      Invoke tool asynchronously, not that different from `Pocket.invoke`
      But this method is called only in subprocess.

      This function performs the following steps:
          1. `prepare_auth` : preparing the authentication process for the tool if necessary.
          2. `authenticate` : performing authentication that needs to invoke tool.
          3. `tool_call` : Executing tool actually with authentication information.

      :param tool_name: tool name to invoke
      :type tool_name: str
      :param body: tool arguments. should be json format
      :type body: Any
      :param thread_id: thread id
      :type thread_id: str
      :param profile: profile name
      :type profile: str

      :returns: tool result and state.
      :rtype: tuple[str, bool]



   .. py:method:: prepare_auth(tool_name: Union[str, List[str]], thread_id: str = 'default', profile: str = 'default', **kwargs) -> Optional[str]
      :async:


      Prepares the authentication process for the tool if necessary.
      Returns callback URL and whether the tool requires authentication.

      :param tool_name: tool name to invoke
      :type tool_name: Union[str,List[str]]
      :param thread_id: thread id
      :type thread_id: str
      :param profile: profile name
      :type profile: str

      :returns: callback URI if necessary
      :rtype: Optional[str]



   .. py:method:: authenticate(tool_name: str, thread_id: str = 'default', profile: str = 'default', **kwargs) -> dict[str, str]
      :async:


      Authenticates the handler included in the tool and returns credentials.

      :param tool_name: tool name to invoke
      :type tool_name: str
      :param thread_id: thread id
      :type thread_id: str
      :param profile: profile name
      :type profile: str

      :returns: credentials
      :rtype: dict[str, str]



   .. py:method:: tool_call(tool_name: str, body: Any, thread_id: str = 'default', profile: str = 'default', *args, **kwargs)
      :async:



   .. py:method:: grouping_tool_by_auth_provider() -> dict[str, List[hyperpocket.tool.Tool]]


   .. py:method:: load_tools(tools: Union[List[hyperpocket.tool_like.ToolLike], hyperpocket.tool_like.ToolLike]) -> List[hyperpocket.tool.Tool]

      Load a list of tools into the pocket.

      This method takes a list of tool identifiers(tool like) and loads them into the
      pocket for use.

      :param tools: A list of tool identifiers to be loaded.
      :type tools: Union[List[ToolLike], ToolLike]



   .. py:method:: remove_tool(tool_name: str) -> bool

      Remove a tool from the pocket.

      This method removes a tool identified by the given tool_name.

      :param tool_name: The tool name to be removed.
      :type tool_name: str

      :returns: True if the tool is removed successfully, False otherwise.
      :rtype: bool



   .. py:method:: teardown()


